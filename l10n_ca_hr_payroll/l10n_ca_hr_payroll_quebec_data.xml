<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data noupdate="1">

	<!-- Salary Rules for Quebec -->

        <record id="hr_salary_rule_qc_vpayp" model="hr.salary.rule">
            <field name="name">Vacation Pay per pay</field>
            <field name="sequence" eval="210"/>
            <field name="code">VPAYP</field>
            <field name="category_id" ref="VAC"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = GROSS * 0.04 / P</field>
        </record>

        <record id="hr_salary_rule_qc_maxqpip" model="hr.salary.rule">
            <field name="name">Employee and Employer Maximum QPIP Insurable Earnings (MaxQPIP)</field>
            <field name="sequence" eval="130"/>
            <field name="code">MaxQPIP</field>
            <field name="category_id" ref="CALC"/>
            <field name="appears_on_payslip" eval="0"/>
            <field name="active" eval="1"/>
            <field name="condition_select">none</field>
            <field name="amount_select">fix</field>
            <field name="quantity">1.0</field>
            <field name="amount_fix">66000</field>
        </record>

        <record id="hr_salary_rule_qc_maxqpp" model="hr.salary.rule">
            <field name="name">Employee and Employer Maximum QPP Insurable Earnings (MaxQPP)</field>
            <field name="sequence" eval="130"/>
            <field name="code">MaxQPP</field>
            <field name="category_id" ref="CALC"/>
            <field name="appears_on_payslip" eval="0"/>
            <field name="active" eval="1"/>
            <field name="condition_select">none</field>
            <field name="amount_select">fix</field>
            <field name="quantity">1.0</field>
            <field name="amount_fix">50100</field>
        </record>

        <record id="hr_salary_rule_qc_eeins" model="hr.salary.rule">
            <field name="name">Employee Insurance Contribution (EeINS)</field>
            <field name="sequence" eval="130"/>
            <field name="code">EeINS</field>
            <field name="category_id" ref="SDED"/>
            <field name="appears_on_payslip" eval="1"/>
            <field name="active" eval="1"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = employee.eeins</field>
        </record>

        <record id="hr_salary_rule_qc_erins" model="hr.salary.rule">
            <field name="name">Employer Insurance Contribution (ErINS)</field>
            <field name="sequence" eval="130"/>
            <field name="code">ErINS</field>
            <field name="category_id" ref="EMP"/>
            <field name="appears_on_payslip" eval="0"/>
            <field name="active" eval="1"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = employee.erins</field>
        </record>

        <record id="hr_salary_rule_qc_eeei" model="hr.salary.rule">
            <field name="name">Employee EI Contribution (EeEI)</field>
            <field name="sequence" eval="140"/>
            <field name="code">EeEI</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="appears_on_payslip" eval="1"/>
            <field name="active" eval="1"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">if GROSS &gt; EIMaxIE:
    result = EIMaxIE * 1.47 * 0.01 / P
else:
    result = GROSS * 1.47 * 0.01 / P
	    </field>
        </record>

        <record id="hr_salary_rule_qc_erqpp" model="hr.salary.rule">
            <field name="name">Employer QPP Contribution (ErQPP)</field>
            <field name="sequence" eval="146"/>
            <field name="code">ErQPP</field>
            <field name="category_id" ref="EMP"/>
            <field name="appears_on_payslip" eval="0"/>
            <field name="active" eval="1"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">if GROSS &gt; MaxQPP:
    result = MaxQPP * 5.025 * 0.01 / P
else:
    result = GROSS * 5.025 * 0.01 / P
	    </field>
        </record>

        <record id="hr_salary_rule_qc_t4" model="hr.salary.rule">
            <field name="name">Annual Basic Provincial Tax (T4)</field>
            <field eval="154" name="sequence"/>
            <field name="code">T4</field>
            <field name="category_id" ref="PCALC"/>
            <field eval="0" name="appears_on_payslip"/>
            <field eval="1" name="active"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = 1</field>
        </record>

        <record id="hr_salary_rule_qc_t3" model="hr.salary.rule">
            <field name="name">Annual Basic Federal Tax (T3)</field>
            <field eval="170" name="sequence"/>
            <field name="code">T3</field>
            <field name="category_id" ref="FCALC"/>
            <field eval="0" name="appears_on_payslip"/>
            <field eval="1" name="active"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = 1</field>
        </record>

        <record id="hr_salary_rule_qc_t1" model="hr.salary.rule">
            <field name="name">Annual Federal Tax (T1)</field>
            <field eval="170" name="sequence"/>
            <field name="code">T1</field>
            <field name="category_id" ref="FCALC"/>
            <field eval="0" name="appears_on_payslip"/>
            <field eval="1" name="active"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = max(T3 - employee.lcf, 0.0)</field>
        </record>

        <record id="hr_salary_rule_qc_eeqpp" model="hr.salary.rule">
            <field name="name">Employee QPP Contribution (EeQPP)</field>
            <field name="sequence" eval="146"/>
            <field name="code">EeQPP</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="appears_on_payslip" eval="1"/>
            <field name="active" eval="1"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">if GROSS &gt; MaxQPP:
    result = MaxQPP * 5.025 * 0.01 / P
else:
    result = GROSS * 5.025 * 0.01 / P
	    </field>
        </record>

        <record id="hr_salary_rule_qc_eeqpip" model="hr.salary.rule">
            <field name="name">Employee QPIP Contribution (EeQPIP)</field>
            <field name="sequence" eval="146"/>
            <field name="code">EeQPIP</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="appears_on_payslip" eval="1"/>
            <field name="active" eval="1"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">if GROSS &gt; MaxQPIP:
    result = MaxQPIP * 0.559 * 0.01 / P
else:
    result = GROSS * 0.559 * 0.01 / P
	    </field>
        </record>

        <record id="hr_salary_rule_qc_erqpip" model="hr.salary.rule">
            <field name="name">Employer QPIP Contribution (ErQPIP)</field>
            <field name="sequence" eval="146"/>
            <field name="code">ErQPIP</field>
            <field name="category_id" ref="EMP"/>
            <field name="appears_on_payslip" eval="0"/>
            <field name="active" eval="1"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">if GROSS &gt; MaxQPIP:
    result = MaxQPIP * 0.782 * 0.01 / P
else:
    result = GROSS * 0.782 * 0.01 / P
	    </field>
        </record>

        <record id="hr_salary_rule_qc_pit" model="hr.salary.rule">
            <field name="name">Provincial Income Tax (PIT)</field>
            <field name="sequence" eval="180"/>
            <field name="code">PIT</field>
            <field name="appears_on_payslip" eval="1"/>
            <field name="active" eval="1"/>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">taxable_income = BASIC - employee.tp10153
if taxable_income &gt;= 80200:
    res = (taxable_income - 80200) * 0.24 + 40100 * 0.24 + 40100 * 0.16
if taxable_income &gt;= 40100 and taxable_income &lt; 80200:
    res = (taxable_income - 40100) * 0.2 + 40100 * 0.16
if taxable_income &lt; 40100:
    res = (taxable_income - 40100) * 0.16
result = res / P
            </field>
        </record>

        <!-- Salary Structure -->

         <record id="hr_structure_qc" model="hr.payroll.structure">
            <field name="code">QC</field>
            <field name="name">Quebec Base</field>
            <field name="parent_id" ref="hr_structure_ca_base"/>
            <field eval="[(6, 0, [ref('hr_salary_rule_qc_vpayp'), ref('hr_salary_rule_qc_maxqpp'), ref('hr_salary_rule_qc_maxqpip'), ref('hr_salary_rule_qc_eeins'), ref('hr_salary_rule_qc_erins'), ref('hr_salary_rule_qc_eeei'), ref('hr_salary_rule_qc_erqpp'), ref('hr_salary_rule_qc_t4'), ref('hr_salary_rule_qc_t3'), ref('hr_salary_rule_qc_t1'), ref('hr_salary_rule_qc_eeqpp'), ref('hr_salary_rule_qc_eeqpip'), ref('hr_salary_rule_qc_erqpip'), ref('hr_salary_rule_qc_pit')])]" name="rule_ids"/>
        </record>

    </data>
</openerp>
